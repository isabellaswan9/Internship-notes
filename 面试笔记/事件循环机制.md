

### [事件循环机制](https://www.cnblogs.com/yugege/p/9598265.html)



![](https://images2018.cnblogs.com/blog/698814/201809/698814-20180906144953689-838865376.jpg)





![img](https://images2018.cnblogs.com/blog/698814/201809/698814-20180906145003189-254912994.jpg)

同步和异步任务(ajax/settimeout)分别进入不同的执行环境，同步的进入主线程，即主执行栈，异步的进入 Event Queue 。主线程内的任务执行完毕为空，会去 Event Queue 读取对应的任务，推入主线程执行。 



1. 执行同步任务,异步任务放入任务队列

2. 任务队列中有宏任务和微任务,执行红任务,检测是否有微任务,执行所有微任务

3. 下一轮



宏任务:script整体代码 、settimeout/interval/immdediate 、uirender、i/o

微任务:nexttick/promise(async await)/mutation observer

