## [浏览器缓存机制](https://zhuanlan.zhihu.com/p/93357692)

浏览器在**第一次请求资源后**，获取到请求的结果及**缓存标识**。接下来，浏览器会根据第一次请求返回的响应头来确定缓存处理的方式。

### 强缓存

强缓存一定时间内不会向服务器发送请求，直接从缓存中读取资源，无法知晓资源文件的变化。

实现强缓存：Cache-Control

no-cache:使用协商缓存

no-store:不缓存

max-age: max-age=xxx 表示缓存内容将在xxx秒后失效

### 协商缓存

协商缓存是**强制缓存失效**后，浏览器携带**缓存标识符**向服务器发送请求，服务器通过缓存标识决定是否使用缓存的过程。

#### Last-Modified

**该资源文件最后一次更改时间。**服务器在响应头中返回，浏览器下一次发送请求时放到请求头的If-Modified-Since中，服务器接收后做比对，相同则返回304 Not Modified

#### ETag

**使用唯一标识。**服务器在响应头中返回该资源文件的唯一标识符ETag，浏览器下一次发送请求时放到请求头的If-None-Match中，服务器比较ETag是否一致。

<img src="../notes-images/截屏2022-03-12 下午7.17.41.png" alt="截屏2022-03-12 下午7.17.41" style="zoom: 45%;float:left" />

**must-revalidate 表示缓存过期后必须重新向服务器验证**

